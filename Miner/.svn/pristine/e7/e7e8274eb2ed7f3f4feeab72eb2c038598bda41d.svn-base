//
//  BriefTextTableViewCell.m
//  Miner
//
//  Created by biggoldenbee on 15/1/8.
//  Copyright (c) 2015年 jim kaden. All rights reserved.
//

#import "BriefTextTableViewCell.h"

@interface BriefTextTableViewCell()
@property (nonatomic, assign) CGFloat theCurentHeight;
@property (strong, nonatomic) UITextView *textView;
@end

@implementation BriefTextTableViewCell

-(void)initilizingComponents {
    UIFont *font = [UIFont systemFontOfSize:14];
    self.textView = [[UITextView alloc] init];
    [self.textView setFont:font];
    [self.textView setBackgroundColor:[UIColor clearColor]];
    [self.textView setScrollEnabled:FALSE];
    [self.textView setEditable:FALSE];
    [self.textView setSelectable:FALSE];
    [self addSubview:self.textView];
}

- (void)awakeFromNib {
    // Initialization code
    [self initilizingComponents];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(NSInteger)getLines:(NSString *)inStr {
    NSInteger lines = 0;
    
    if ([inStr length]>0) {
        NSMutableArray *strLines = [NSMutableArray array];
        [inStr enumerateLinesUsingBlock: ^(NSString *line, BOOL *stop) {
            [strLines addObject:line];
        }];
        lines = [strLines count] ;
    }
    
    return lines;
    
}

-(void)setTextInfo:(NSString *)inStr {
    // 计算文字行数
    NSInteger lines = [self getLines:inStr] ;
    // 设置view的高度
    self.theCurentHeight = 20+lines*14+20 ;
    CGRect rect= [self frame];
    rect.size.height = self.theCurentHeight;
    [self setFrame:rect];
    // 设置textView的高度和显示内容
    [self.textView setFrame:CGRectMake(10,10,300,self.theCurentHeight-10)];
    [self.textView setText:inStr] ;
   
}

@end
